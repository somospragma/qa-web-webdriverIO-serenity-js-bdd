"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.actorDetailsOf = actorDetailsOf;
/**
 * @package
 */
function actorDetailsOf(actor, config) {
    const abilityMapper = config.includeAbilityDetails ?
        abilityTypeAndOptions :
        abilityType;
    return (context) => {
        context.actors.set(actor.name, actor);
        context.report.actors = Array.from(context.actors.values()).map(actor => ({
            name: actor.name,
            can: actor.abilities.map(ability => abilityMapper(ability)),
        }));
        return context;
    };
}
function abilityType(ability) {
    return [
        ability.type,
        ability.class ? ` (${ability.class})` : '',
    ].join('');
}
function abilityTypeAndOptions(ability) {
    return [
        abilityType(ability),
        ability.options && Object.keys(ability.options).length > 0
            ? ` ${JSON.stringify(ability.options, undefined, 1).replaceAll(/\n\s*/g, ' ').replaceAll(/"(\w+)":/g, '$1:')}`
            : '',
    ].join('');
}
//# sourceMappingURL=actorDetailsOf.js.map